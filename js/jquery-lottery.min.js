/*! jQuery Lottery - v0.2.0 - 2012-10-07
* Copyright (c) 2012 Kenny Meyer; Licensed MIT */
jQuery(function(){return $.lottery=function(e,t){var n,r=this;return n="",this.timerHandle,this.mainDiv=$("<div class='lottery-plugin' />"),this.settings={},this.$element=$(e),this.setState=function(e){return n=e},this.getState=function(){return n},this.getSetting=function(e){return this.settings[e]},this.callSettingFunction=function(e,t){return t==null&&(t=[]),this.settings[e].apply(this,t)},this.mixNames=function(e){var t=this;return this.timerHandle?console.log("Timer already running"):this.timerHandle=window.setInterval(function(){var e;return t.mainDiv.empty(),e=Math.floor(Math.random()*t.listItems.length),t.mainDiv.append($("<p class='lottery-option'>"+t.listItems[e]+"</p>")),console.log(e)},100)},this.stopLottery=function(){return typeof console.log=="function"&&console.log("Ended"),window.clearInterval(this.timerHandle),$("p.lottery-option").css("color","green")},this.startLottery=function(){var e=this;return this.$element.replaceWith(this.mainDiv),this.mixNames(),window.setTimeout(function(){return e.stopLottery()},5e3)},this.startButtonPressed=function(){return r.startLottery()},this.setupListeners=function(){return $("button.start-lottery").bind("click",this.startButtonPressed)},this.init=function(){var e=this;return this.settings=$.extend({},this.defaults,t),this.setState("ready"),this.listItems=[],$(this.$element).find("li").each(function(t,n){return e.listItems.push($(n).text())}),this.$element.html($("<button class='start-lottery'>Start</button>")),this.setupListeners()},this.init(),this},$.lottery.prototype.defaults=$.fn.lottery=function(e){return this.each(function(){var t;if($(this).data("lottery")===void 0)return t=new $.lottery(this,e),$(this).data("lottery",t)})}});